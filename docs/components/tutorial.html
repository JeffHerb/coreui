<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Core UI Documentation</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="author" content="New York State OITS">
    <meta name="keywords" content="Core UI, HTML, CSS, user interface, framework, documentation, New York State, Office of Information Technology Services">
    <link rel="canonical" href="https://github.com/ny/frg-coreui">
    <link href="/docs/_includes/css/markdown.css" rel="stylesheet">
    <link href="/docs/_includes/css/markdown-github.css" rel="stylesheet">
</head>
<body>
    <div class="markdown-body">
        <h1 id="creating-your-first-core-ui-component">Creating your First Core UI Component</h1>
<p>Sooner or later, every developer is going to run across the need of some form of functionality that is not already being provided. But to properly intergrate that component into Core UI could be alittle confusing. So, lets create a simple Hello World component. The purpose of this component is to append a simple text message to any valid jQuery selectable element that a developer could provide. We also want to provide the developers with a way to override the default jQuery setting to change the message out directly using a options provided during execution, or by options attached using the <code>data-</code> HTML 5 attributes on the elements.</p>
<p>Before we get started, make sure you have all of the following.</p>
<ul>
<li>A recently cloned copy of <a href="https://github.com/ny/coreui">Core UI</a></li>
<li>A copy of Node JS (v0.10.38 and below, Do not use a more modern version)</li>
<li>A simple text editor or other IDE environment.</li>
</ul>
<p>To start the creation process, lets add a folder to your project called <code>hello-world</code> to your <code>src/project/components</code> folder. If you dont have this <code>components</code> folder go ahead and create this as well.</p>
<p>Next inside of the <code>helloWorld</code> folder, create the following directory structure:</p>
<pre><code>helloWorld/
    ├─ <span class="hljs-keyword">js</span>/
    ├─ <span class="hljs-keyword">test</span>/
</code></pre><p>To start, lets flesh our the actual component code. Create the <code>helloWorld.js</code> file in the <code>js</code> folder; and add the following UMD ceremony boiler plate.</p>
<pre><code class="lang-js"><span class="hljs-comment">// File: src/project/components/helloWorld/helloWorld.js</span>

(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(factory)</span> </span>{

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> define === <span class="hljs-string">'function'</span> &amp;&amp; define.amd) {
        <span class="hljs-comment">// AMD. Register as an anonymous module.</span>
        define([<span class="hljs-string">'jquery'</span>], factory);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// Browser globals</span>
        factory(jQuery);
    }

}(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($)</span> </span>{

    <span class="hljs-comment">// Plugin code will go here.</span>

}));
</code></pre>
<p>The above code simply does the check to see if the AMD definition was defined. If it can find it, it will register the component using the AMD define method. This code is a requirement and this particular ceremony is the recommended standard for all Core UI components. With the ceremony in place, we can now focus on the actual plugin code. Simply add the following code under the plugin comment.</p>
<pre><code class="lang-js"><span class="hljs-comment">// File: src/project/components/helloWorld/helloWorld.js</span>

<span class="hljs-comment">// ... ceremoney start omitted ---</span>

<span class="hljs-comment">// Plugin name, abstracted for single point of control</span>
<span class="hljs-keyword">var</span> pluginName = <span class="hljs-string">"helloWorld"</span>;

<span class="hljs-comment">// Pluggin constructor</span>
<span class="hljs-keyword">var</span> Plugin = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(elem, options)</span> </span>{

    <span class="hljs-keyword">this</span>.elem = elem;
    <span class="hljs-keyword">this</span>.$elem = $(elem);
    <span class="hljs-keyword">this</span>.options = options;

    <span class="hljs-comment">// Get HTML 5 data-attribute options</span>
    <span class="hljs-keyword">this</span>.metadata = <span class="hljs-keyword">this</span>.$elem.data(<span class="hljs-string">'plugin-options'</span>);
}

<span class="hljs-comment">// Plugin options and methods</span>
Plugin.prototype = {

    <span class="hljs-comment">// Plugin default options</span>
    defaults: {
        message: <span class="hljs-string">'Hello World'</span>
    },

    <span class="hljs-comment">// Plugin initialization code</span>
    init:  <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{

        <span class="hljs-keyword">this</span>.config = $.extend({}, <span class="hljs-keyword">this</span>.defaults, <span class="hljs-keyword">this</span>.options, <span class="hljs-keyword">this</span>.metadata);

        <span class="hljs-comment">// Call the default function that should be executed</span>
        <span class="hljs-keyword">this</span>.appendText();

        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    },

    <span class="hljs-comment">// Plugin method</span>
    appendText: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{

        <span class="hljs-keyword">this</span>.$elem.append(<span class="hljs-built_in">document</span>.createTextNode(<span class="hljs-keyword">this</span>.config.message));
    }

}

<span class="hljs-comment">// Create a short cut path to the default plugin definitions</span>
Plugin.defaults = Plugin.prototype.defaults;


<span class="hljs-comment">// Create the plugin in the jQuery namespace</span>
$.fn[pluginName] = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(options)</span> </span>{

    <span class="hljs-comment">// Iterate of each plugin individually and create a new instance for each occurance.</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{

        <span class="hljs-comment">// Create an instance of the plugin for each specific element.</span>
        <span class="hljs-keyword">new</span> Plugin(<span class="hljs-keyword">this</span>, options).init();

    });
};

<span class="hljs-comment">// ... ceremoney end omitted ---</span>
</code></pre>
<p>Thats it! At this point you have create a very simple hello world component. Things to note, there are many different ways to create jQuery components, this tutorial is only going to show you one particular way. It is highly recommended that you do some research on what method to us based on the type of plugin/component being built.</p>
<p>Now to test our new component and jQuery plugin, we should generate a test page. It is recommended that all components have a test page that accompanys them. A component can have as many test files as needed and they should all be specified in the <code>tests</code> folder right inside of the component directory. To get started create a <code>index.html</code> file inside our components <code>test</code> directory. But when we create this test, we could really be testing using the compiled CUI resources. To bootstrap your test page, take a copy of the base template file from <code>src/cui/templates/base-test.html</code>. This template will take care of all your pathing issues as long as the test page is being created inside of the component test folder. Once copied, add the following code to the body section of the HTML right before the Core UI (<code>main.js</code>) script tag.</p>
<pre><code class="lang-html"><span class="hljs-comment">&lt;!-- ID based test --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">h2</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"helloWorld"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">h2</span>&gt;</span>

<span class="hljs-comment">&lt;!-- Class based test --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">p</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"helloWorld"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span>

<span class="hljs-comment">&lt;!-- Element based test --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">li</span> <span class="hljs-attribute">data-plugin-options</span>=<span class="hljs-value">'{"message":"Hello Item 1!"}'</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">li</span> <span class="hljs-attribute">data-plugin-options</span>=<span class="hljs-value">'{"message":"Hello Item 2!"}'</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">li</span> <span class="hljs-attribute">data-plugin-options</span>=<span class="hljs-value">'{"message":"Hello Item 3!"}'</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">li</span> <span class="hljs-attribute">data-plugin-options</span>=<span class="hljs-value">'{"message":"Hello Item 4!"}'</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">li</span> <span class="hljs-attribute">data-plugin-options</span>=<span class="hljs-value">'{"message":"Hello Item 5!"}'</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">ul</span>&gt;</span>
</code></pre>
<p>Next we need to create a new script section just underneth the <code>main.js</code>. This is where we will start using our newly created plugin, but first we need to use require to load it and its dependancies. To do this start by adding the following:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="javascript">

    $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span>) </span>{

        <span class="hljs-comment">// Setup the id (h2)</span>
        $(<span class="hljs-string">'#helloWorld'</span>).helloWorld();

        <span class="hljs-comment">// Setup the classe (p)</span>
        $(<span class="hljs-string">'.helloWorld'</span>).helloWorld({message: <span class="hljs-string">"Hello Classe Element!"</span>});

        <span class="hljs-comment">// Setup the element selctors (ul li's)</span>
        $(<span class="hljs-string">'ul li'</span>).helloWorld();

    });

</span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code></pre>
<p>By default we created a very simple module and because we didnt not declare it in any special why, the module was prebuilt and shipped inside of Core UI main.js. So in order to use this module we simply need to wait for the document to be ready and then we just need to call it. To test your plugin, open a terminal or command prompt window that has access to nodejs. Then simple travel to the project folder root and enter the command <code>grunt dev</code>. Once the terminal returns the status of <code>Waiting...</code> Simply go check you <a href="http://localhost:8888/dist/tests/helloWolrd/">test page</a>. You should see something similar to the image below.</p>

    </div>
    <script> try { document.title = document.getElementsByTagName('h1')[0].innerHTML + ' - ' + document.title; } catch(e) { }</script>
</body>
</html>
